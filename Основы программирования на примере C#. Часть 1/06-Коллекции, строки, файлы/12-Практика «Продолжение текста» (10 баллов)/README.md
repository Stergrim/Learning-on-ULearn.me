# Практика «Продолжение текста»

Продолжайте работу в [том же проекте.](TextAnalysis.zip)

В классе TextGeneratorTask реализуйте алгоритм продолжения текста по N-граммной модели.

Описание алгоритма:

На вход алгоритму передается словарь `nextWords`, полученный в предыдущей задаче, одно или несколько первых слов фразы `phraseBeginning` и `wordsCount` — количество слов, которые нужно дописать к `phraseBeginning`.

Словарь nextWords в качестве ключей содержит либо отдельные слова, либо пары слов, соединённые через пробел. По ключу key содержится слово, которым нужно продолжать фразы, заканчивающиеся на key.

Алгоритм должен работать следующим образом:

- Итоговая фраза должна начинаться с `phraseBeginning`.

- К ней дописывается `wordsCount` слов таким образом:

    - a. Если фраза содержит как минимум два слова и в словаре есть ключ, состоящий из двух последних слов фразы, то продолжать нужно словом, из словаря по этому ключу.

    - b. Иначе, если в словаре есть ключ, состоящий из одного последнего слова фразы, то продолжать нужно словом, хранящемся в словаре по этому ключу.

    - c. Иначе, нужно досрочно закончить генерирование фразы и вернуть сгенерированный на данный момент результат.

Проверяющая система сначала запустит эталонный способ разделения исходного текста на предложения и слова, потом эталонный способ построения словаря наиболее частотных продолжений из предыдущей задачи, а затем вызовет реализованный вами метод. В случае ошибки вы увидите исходный текст, на котором запускался процесс тестирования.

Если запустить проект на выполнение, он предложит ввести начало фразы и сгенерирует продолжение. Позапускайте алгоритм на разных текстах и разных фразах. Результат может быть интересным!

**О применении N-граммных моделей**

Подобные N-граммные модели текстов часто используются в самых разных задачах обработки текстов. Когда поисковая строка предлагает вам продолжение вашей фразы — скорее всего это результат работы подобного алгоритма.

Сравнивая частоты N-грамм можно сравнивать тексты на похожесть и искать плагиат.

Опираясь на N-граммные модели текстов можно улучшать алгоритмы исправления опечаток или автокоррекции вводимого текста.


Все тесты пройдены, задача сдана:
```cs
using System.Collections.Generic;

namespace TextAnalysis
{
    static class TextGeneratorTask
    {
        public static string ContinuePhrase(Dictionary<string, string> nextWords,
                                            string phraseBeginning, int wordsCount)
        {
            List<string> str = new List<string>();
            string[] temp = phraseBeginning.Split(' ');
            for (int j = 0; j < temp.Length; j++)
                str.Add(temp[j]);
            for (int i = 0; i < wordsCount; i++)
            {
                if (str.Count < 2)
                    if (nextWords.ContainsKey(str[0])) str.Add(nextWords[str[0]]);
                    else break;
                else if (nextWords.ContainsKey(str[str.Count - 2] + " " + str[str.Count - 1]))
                    str.Add(nextWords[str[str.Count - 2] + " " + str[str.Count - 1]]);
                else if (nextWords.ContainsKey(str[str.Count - 1]))
                    str.Add(nextWords[str[str.Count - 1]]);
                else break;
            }
            phraseBeginning = string.Join(" ", str.ToArray());
            return phraseBeginning;
        }
    }
}
```

**Проект со всеми внесенными решениями.**
[TextAnalysis Edit](TextAnalysis_Edit.zip)